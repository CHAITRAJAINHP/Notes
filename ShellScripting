1. Write a shell script to check disk usage and alert if usage exceeds 80%.
bash
Copy
Edit
#!/bin/bash
THRESHOLD=80
df -H | grep -vE '^Filesystem|tmpfs' | awk '{ print $5 " " $6 }' | while read output; do
  usage=$(echo $output | awk '{ print $1}' | tr -d '%')
  partition=$(echo $output | awk '{ print $2 }')
  if [ $usage -ge $THRESHOLD ]; then
    echo "Warning: Disk usage is above $THRESHOLD% on $partition ($usage%)"
    # Optionally send email/alert here
  fi
done

2. Write a script to find the top 5 memory-consuming processes.
bash
Copy
Edit
#!/bin/bash
echo "Top 5 memory consuming processes:"
ps aux --sort=-%mem | head -n 6

3. Script to monitor if a critical service (e.g., nginx) is running. Restart if it's not.
bash
Copy
Edit
#!/bin/bash
SERVICE="nginx"
if ! pgrep -x "$SERVICE" > /dev/null; then
  echo "$SERVICE is not running. Restarting..."
  systemctl start $SERVICE
fi

4. How do you parse logs to extract HTTP 500 errors from an Apache access log?
bash
Copy
Edit
#!/bin/bash
grep "HTTP/1.1\" 500" /var/log/apache2/access.log > 500_errors.log
echo "Total 500 errors: $(wc -l < 500_errors.log)"

5. Shell script to check if a server is reachable via ping.
bash
Copy
Edit
#!/bin/bash
HOST="8.8.8.8"
ping -c 2 $HOST > /dev/null

if [ $? -eq 0 ]; then
  echo "$HOST is reachable."
else
  echo "$HOST is not reachable."
fi

6. Script to clean up logs older than 7 days.
bash
Copy
Edit
#!/bin/bash
LOG_DIR="/var/log/myapp"
find $LOG_DIR -type f -name "*.log" -mtime +7 -exec rm -f {} \;
echo "Old logs cleaned up."

7. Write a script to check CPU usage and alert if it exceeds 85%.
bash
Copy
Edit
#!/bin/bash
CPU_USAGE=$(top -bn1 | grep "Cpu(s)" | awk '{print $2 + $4}')
THRESHOLD=85.0

if (( $(echo "$CPU_USAGE > $THRESHOLD" | bc -l) )); then
  echo "High CPU usage detected: $CPU_USAGE%"
fi
8. Script to backup a directory and timestamp the archive.
bash
Copy
Edit
#!/bin/bash
SOURCE="/etc"
DEST="/backup"
DATE=$(date +%Y-%m-%d)
tar -czf $DEST/etc-backup-$DATE.tar.gz $SOURCE

9. How to extract IPs from a log file using shell script?
bash
Copy
Edit
#!/bin/bash
grep -oE "\b([0-9]{1,3}\.){3}[0-9]{1,3}\b" /var/log/apache2/access.log | sort | uniq

10. Write a script to monitor the number of established TCP connections.
bash
Copy
Edit
#!/bin/bash
echo "Total established connections: $(netstat -an | grep ESTABLISHED | wc -l)"
